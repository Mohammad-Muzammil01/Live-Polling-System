{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rizwa\\\\Desktop\\\\Live Polling System\\\\frontend\\\\src\\\\components\\\\ChatPopup.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled from 'styled-components';\nimport { toggleChat, setActiveTab, addMessage } from '../store/chatSlice';\nimport socketService from '../services/socketService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatOverlay = styled.div`\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  z-index: 2000;\n  pointer-events: none;\n`;\n_c = ChatOverlay;\nconst ChatContainer = styled.div`\n  background: #FFFFFF;\n  border-radius: 8px;\n  width: 420px;\n  height: 360px;\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #EAEAEA;\n  box-shadow: 0 8px 24px rgba(0,0,0,0.08);\n  pointer-events: auto;\n`;\n_c2 = ChatContainer;\nconst ChatHeader = styled.div`\n  padding: 10px 12px;\n  border-bottom: 1px solid #EAEAEA;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n_c3 = ChatHeader;\nconst ChatTitle = styled.h3`\n  font-size: 12px;\n  font-weight: 600;\n  color: #6E6E6E;\n`;\n_c4 = ChatTitle;\nconst CloseButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 18px;\n  color: #6E6E6E;\n  cursor: pointer;\n  padding: 0;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background-color 0.2s ease;\n  \n  &:hover {\n    background: #F2F2F2;\n  }\n`;\n_c5 = CloseButton;\nconst TabContainer = styled.div`\n  display: flex;\n  border-bottom: 1px solid #EAEAEA;\n`;\n_c6 = TabContainer;\nconst Tab = styled.button`\n  flex: 1;\n  padding: 10px 12px;\n  border: none;\n  background: transparent;\n  color: #6E6E6E;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n\n  ${props => props.isActive && `color: #373737;`}\n\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    bottom: -1px;\n    height: 2px;\n    width: ${props => props.isActive ? '100%' : '0'};\n    background: #7765DA;\n    transition: width 0.2s ease;\n  }\n`;\n_c7 = Tab;\nconst ChatContent = styled.div`\n  flex: 1;\n  padding: 12px;\n  overflow-y: auto;\n`;\n_c8 = ChatContent;\nconst MessagesContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n_c9 = MessagesContainer;\nconst MessageItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: ${props => props.isOwn ? 'flex-end' : 'flex-start'};\n`;\n_c0 = MessageItem;\nconst MessageBubble = styled.div`\n  max-width: 80%;\n  padding: 12px 16px;\n  border-radius: 16px;\n  background: ${props => props.isOwn ? '#7765DA' : '#F2F2F2'};\n  color: ${props => props.isOwn ? 'white' : '#373737'};\n  font-size: 14px;\n  line-height: 1.4;\n  word-wrap: break-word;\n`;\n_c1 = MessageBubble;\nconst MessageSender = styled.div`\n  font-size: 12px;\n  color: #6E6E6E;\n  margin-bottom: 4px;\n  font-weight: 500;\n`;\n_c10 = MessageSender;\nconst ParticipantsList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n_c11 = ParticipantsList;\nconst ParticipantItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 10px;\n  background: #FFFFFF;\n  border-radius: 6px;\n  border: 1px solid #F2F2F2;\n`;\n_c12 = ParticipantItem;\nconst ParticipantName = styled.div`\n  font-size: 14px;\n  color: #373737;\n  font-weight: 500;\n`;\n_c13 = ParticipantName;\nconst ParticipantStatus = styled.div`\n  font-size: 12px;\n  color: #6E6E6E;\n`;\n_c14 = ParticipantStatus;\nconst ChatInput = styled.div`\n  padding: 10px 12px;\n  border-top: 1px solid #EAEAEA;\n  display: flex;\n  gap: 8px;\n`;\n_c15 = ChatInput;\nconst MessageInput = styled.input`\n  flex: 1;\n  padding: 10px 12px;\n  border: 1px solid #EAEAEA;\n  border-radius: 6px;\n  font-size: 13px;\n  outline: none;\n  transition: border-color 0.2s ease;\n  \n  &:focus {\n    border-color: #7765DA;\n  }\n  \n  &::placeholder {\n    color: #6E6E6E;\n  }\n`;\n_c16 = MessageInput;\nconst SendButton = styled.button`\n  background: #7765DA;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 10px 14px;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #6B5BC7;\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n_c17 = SendButton;\nconst ChatPopup = () => {\n  _s();\n  const [message, setMessage] = useState('');\n  const [currentUser] = useState('User ' + Math.floor(Math.random() * 1000) + 1);\n  const dispatch = useDispatch();\n  const {\n    isOpen,\n    activeTab,\n    messages,\n    participants\n  } = useSelector(state => state.chat);\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Listen for real-time chat events\n  useEffect(() => {\n    if (!isOpen) return;\n    const handleIncoming = messageData => {\n      dispatch(addMessage({\n        id: messageData.id || Date.now().toString(),\n        sender: messageData.sender || messageData.senderName || 'User',\n        text: messageData.text,\n        isOwn: false\n      }));\n    };\n    const handleSent = messageData => {\n      dispatch(addMessage({\n        id: messageData.id || Date.now().toString(),\n        sender: messageData.sender || messageData.senderName || currentUser,\n        text: messageData.text,\n        isOwn: true\n      }));\n    };\n    socketService.onMessageReceived(handleIncoming);\n    socketService.onMessageSent(handleSent);\n    socketService.onUserTyping(() => {});\n    socketService.onUserStoppedTyping(() => {});\n    return () => {\n      socketService.off('new_message');\n      socketService.off('private_message');\n      socketService.off('message_sent');\n      socketService.off('user_typing');\n      socketService.off('user_stopped_typing');\n    };\n  }, [isOpen, dispatch, currentUser]);\n  if (!isOpen) return null;\n  const handleClose = () => {\n    dispatch(toggleChat());\n  };\n  const handleTabChange = tab => {\n    dispatch(setActiveTab(tab));\n  };\n  const handleSendMessage = () => {\n    if (!message.trim()) return;\n    socketService.sendMessage({\n      sender: currentUser,\n      text: message.trim(),\n      timestamp: new Date().toISOString()\n    });\n    // Do not push to store here; rely on message_sent echo to avoid duplicates\n    setMessage('');\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSendMessage();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ChatOverlay, {\n    children: /*#__PURE__*/_jsxDEV(ChatContainer, {\n      children: [/*#__PURE__*/_jsxDEV(ChatHeader, {\n        children: [/*#__PURE__*/_jsxDEV(ChatTitle, {\n          children: \"Chat & Participants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n          onClick: handleClose,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          isActive: activeTab === 'chat',\n          onClick: () => handleTabChange('chat'),\n          children: \"Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          isActive: activeTab === 'participants',\n          onClick: () => handleTabChange('participants'),\n          children: \"Participants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChatContent, {\n        children: activeTab === 'chat' ? /*#__PURE__*/_jsxDEV(MessagesContainer, {\n          children: [messages.map(msg => /*#__PURE__*/_jsxDEV(MessageItem, {\n            isOwn: msg.isOwn,\n            children: [/*#__PURE__*/_jsxDEV(MessageSender, {\n              children: msg.sender\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(MessageBubble, {\n              isOwn: msg.isOwn,\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 19\n            }, this)]\n          }, msg.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(ParticipantsList, {\n          children: participants.length > 0 ? participants.map(participant => /*#__PURE__*/_jsxDEV(ParticipantItem, {\n            children: [/*#__PURE__*/_jsxDEV(ParticipantName, {\n              children: participant.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(ParticipantStatus, {\n              children: \"Online\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 21\n            }, this)]\n          }, participant.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 19\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              color: '#6E6E6E',\n              padding: '20px'\n            },\n            children: \"No participants yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), activeTab === 'chat' && /*#__PURE__*/_jsxDEV(ChatInput, {\n        children: [/*#__PURE__*/_jsxDEV(MessageInput, {\n          type: \"text\",\n          placeholder: \"Type your message...\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          onKeyPress: handleKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SendButton, {\n          onClick: handleSendMessage,\n          disabled: !message.trim(),\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPopup, \"qCjz94f6FHMP+6bzM6UMnbPnmEg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c18 = ChatPopup;\nexport default ChatPopup;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18;\n$RefreshReg$(_c, \"ChatOverlay\");\n$RefreshReg$(_c2, \"ChatContainer\");\n$RefreshReg$(_c3, \"ChatHeader\");\n$RefreshReg$(_c4, \"ChatTitle\");\n$RefreshReg$(_c5, \"CloseButton\");\n$RefreshReg$(_c6, \"TabContainer\");\n$RefreshReg$(_c7, \"Tab\");\n$RefreshReg$(_c8, \"ChatContent\");\n$RefreshReg$(_c9, \"MessagesContainer\");\n$RefreshReg$(_c0, \"MessageItem\");\n$RefreshReg$(_c1, \"MessageBubble\");\n$RefreshReg$(_c10, \"MessageSender\");\n$RefreshReg$(_c11, \"ParticipantsList\");\n$RefreshReg$(_c12, \"ParticipantItem\");\n$RefreshReg$(_c13, \"ParticipantName\");\n$RefreshReg$(_c14, \"ParticipantStatus\");\n$RefreshReg$(_c15, \"ChatInput\");\n$RefreshReg$(_c16, \"MessageInput\");\n$RefreshReg$(_c17, \"SendButton\");\n$RefreshReg$(_c18, \"ChatPopup\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useDispatch","useSelector","styled","toggleChat","setActiveTab","addMessage","socketService","jsxDEV","_jsxDEV","ChatOverlay","div","_c","ChatContainer","_c2","ChatHeader","_c3","ChatTitle","h3","_c4","CloseButton","button","_c5","TabContainer","_c6","Tab","props","isActive","_c7","ChatContent","_c8","MessagesContainer","_c9","MessageItem","isOwn","_c0","MessageBubble","_c1","MessageSender","_c10","ParticipantsList","_c11","ParticipantItem","_c12","ParticipantName","_c13","ParticipantStatus","_c14","ChatInput","_c15","MessageInput","input","_c16","SendButton","_c17","ChatPopup","_s","message","setMessage","currentUser","Math","floor","random","dispatch","isOpen","activeTab","messages","participants","state","chat","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleIncoming","messageData","id","Date","now","toString","sender","senderName","text","handleSent","onMessageReceived","onMessageSent","onUserTyping","onUserStoppedTyping","off","handleClose","handleTabChange","tab","handleSendMessage","trim","sendMessage","timestamp","toISOString","handleKeyPress","e","key","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","msg","ref","length","participant","name","style","textAlign","color","padding","type","placeholder","value","onChange","target","onKeyPress","disabled","_c18","$RefreshReg$"],"sources":["C:/Users/rizwa/Desktop/Live Polling System/frontend/src/components/ChatPopup.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport styled from 'styled-components';\r\nimport { toggleChat, setActiveTab, addMessage } from '../store/chatSlice';\r\nimport socketService from '../services/socketService';\r\n\r\nconst ChatOverlay = styled.div`\r\n  position: fixed;\r\n  bottom: 24px;\r\n  right: 24px;\r\n  z-index: 2000;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst ChatContainer = styled.div`\r\n  background: #FFFFFF;\r\n  border-radius: 8px;\r\n  width: 420px;\r\n  height: 360px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid #EAEAEA;\r\n  box-shadow: 0 8px 24px rgba(0,0,0,0.08);\r\n  pointer-events: auto;\r\n`;\r\n\r\nconst ChatHeader = styled.div`\r\n  padding: 10px 12px;\r\n  border-bottom: 1px solid #EAEAEA;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst ChatTitle = styled.h3`\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  color: #6E6E6E;\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  font-size: 18px;\r\n  color: #6E6E6E;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 28px;\r\n  height: 28px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: background-color 0.2s ease;\r\n  \r\n  &:hover {\r\n    background: #F2F2F2;\r\n  }\r\n`;\r\n\r\nconst TabContainer = styled.div`\r\n  display: flex;\r\n  border-bottom: 1px solid #EAEAEA;\r\n`;\r\n\r\nconst Tab = styled.button`\r\n  flex: 1;\r\n  padding: 10px 12px;\r\n  border: none;\r\n  background: transparent;\r\n  color: #6E6E6E;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  position: relative;\r\n\r\n  ${(props) => props.isActive && `color: #373737;`}\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: -1px;\r\n    height: 2px;\r\n    width: ${props => props.isActive ? '100%' : '0'};\r\n    background: #7765DA;\r\n    transition: width 0.2s ease;\r\n  }\r\n`;\r\n\r\nconst ChatContent = styled.div`\r\n  flex: 1;\r\n  padding: 12px;\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst MessagesContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n`;\r\n\r\nconst MessageItem = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: ${props => props.isOwn ? 'flex-end' : 'flex-start'};\r\n`;\r\n\r\nconst MessageBubble = styled.div`\r\n  max-width: 80%;\r\n  padding: 12px 16px;\r\n  border-radius: 16px;\r\n  background: ${props => props.isOwn ? '#7765DA' : '#F2F2F2'};\r\n  color: ${props => props.isOwn ? 'white' : '#373737'};\r\n  font-size: 14px;\r\n  line-height: 1.4;\r\n  word-wrap: break-word;\r\n`;\r\n\r\nconst MessageSender = styled.div`\r\n  font-size: 12px;\r\n  color: #6E6E6E;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ParticipantsList = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n`;\r\n\r\nconst ParticipantItem = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 8px 10px;\r\n  background: #FFFFFF;\r\n  border-radius: 6px;\r\n  border: 1px solid #F2F2F2;\r\n`;\r\n\r\nconst ParticipantName = styled.div`\r\n  font-size: 14px;\r\n  color: #373737;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ParticipantStatus = styled.div`\r\n  font-size: 12px;\r\n  color: #6E6E6E;\r\n`;\r\n\r\nconst ChatInput = styled.div`\r\n  padding: 10px 12px;\r\n  border-top: 1px solid #EAEAEA;\r\n  display: flex;\r\n  gap: 8px;\r\n`;\r\n\r\nconst MessageInput = styled.input`\r\n  flex: 1;\r\n  padding: 10px 12px;\r\n  border: 1px solid #EAEAEA;\r\n  border-radius: 6px;\r\n  font-size: 13px;\r\n  outline: none;\r\n  transition: border-color 0.2s ease;\r\n  \r\n  &:focus {\r\n    border-color: #7765DA;\r\n  }\r\n  \r\n  &::placeholder {\r\n    color: #6E6E6E;\r\n  }\r\n`;\r\n\r\nconst SendButton = styled.button`\r\n  background: #7765DA;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  padding: 10px 14px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  \r\n  &:hover {\r\n    background: #6B5BC7;\r\n  }\r\n  \r\n  &:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst ChatPopup = () => {\r\n  const [message, setMessage] = useState('');\r\n  const [currentUser] = useState('User ' + Math.floor(Math.random() * 1000) + 1);\r\n  const dispatch = useDispatch();\r\n  const { isOpen, activeTab, messages, participants } = useSelector((state) => state.chat);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Listen for real-time chat events\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleIncoming = (messageData) => {\r\n      dispatch(addMessage({\r\n        id: messageData.id || Date.now().toString(),\r\n        sender: messageData.sender || messageData.senderName || 'User',\r\n        text: messageData.text,\r\n        isOwn: false\r\n      }));\r\n    };\r\n\r\n    const handleSent = (messageData) => {\r\n      dispatch(addMessage({\r\n        id: messageData.id || Date.now().toString(),\r\n        sender: messageData.sender || messageData.senderName || currentUser,\r\n        text: messageData.text,\r\n        isOwn: true\r\n      }));\r\n    };\r\n\r\n    socketService.onMessageReceived(handleIncoming);\r\n    socketService.onMessageSent(handleSent);\r\n\r\n    socketService.onUserTyping(() => {});\r\n    socketService.onUserStoppedTyping(() => {});\r\n\r\n    return () => {\r\n      socketService.off('new_message');\r\n      socketService.off('private_message');\r\n      socketService.off('message_sent');\r\n      socketService.off('user_typing');\r\n      socketService.off('user_stopped_typing');\r\n    };\r\n  }, [isOpen, dispatch, currentUser]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleClose = () => {\r\n    dispatch(toggleChat());\r\n  };\r\n\r\n  const handleTabChange = (tab) => {\r\n    dispatch(setActiveTab(tab));\r\n  };\r\n\r\n  const handleSendMessage = () => {\r\n    if (!message.trim()) return;\r\n    socketService.sendMessage({\r\n      sender: currentUser,\r\n      text: message.trim(),\r\n      timestamp: new Date().toISOString()\r\n    });\r\n    // Do not push to store here; rely on message_sent echo to avoid duplicates\r\n    setMessage('');\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ChatOverlay>\r\n      <ChatContainer>\r\n        <ChatHeader>\r\n          <ChatTitle>Chat & Participants</ChatTitle>\r\n          <CloseButton onClick={handleClose}>&times;</CloseButton>\r\n        </ChatHeader>\r\n\r\n        <TabContainer>\r\n          <Tab\r\n            isActive={activeTab === 'chat'}\r\n            onClick={() => handleTabChange('chat')}\r\n          >\r\n            Chat\r\n          </Tab>\r\n          <Tab\r\n            isActive={activeTab === 'participants'}\r\n            onClick={() => handleTabChange('participants')}\r\n          >\r\n            Participants\r\n          </Tab>\r\n        </TabContainer>\r\n\r\n        <ChatContent>\r\n          {activeTab === 'chat' ? (\r\n            <MessagesContainer>\r\n              {messages.map((msg) => (\r\n                <MessageItem key={msg.id} isOwn={msg.isOwn}>\r\n                  <MessageSender>{msg.sender}</MessageSender>\r\n                  <MessageBubble isOwn={msg.isOwn}>\r\n                    {msg.text}\r\n                  </MessageBubble>\r\n                </MessageItem>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </MessagesContainer>\r\n          ) : (\r\n            <ParticipantsList>\r\n              {participants.length > 0 ? (\r\n                participants.map((participant) => (\r\n                  <ParticipantItem key={participant.id}>\r\n                    <ParticipantName>{participant.name}</ParticipantName>\r\n                    <ParticipantStatus>Online</ParticipantStatus>\r\n                  </ParticipantItem>\r\n                ))\r\n              ) : (\r\n                <div style={{ textAlign: 'center', color: '#6E6E6E', padding: '20px' }}>\r\n                  No participants yet\r\n                </div>\r\n              )}\r\n            </ParticipantsList>\r\n          )}\r\n        </ChatContent>\r\n\r\n        {activeTab === 'chat' && (\r\n          <ChatInput>\r\n            <MessageInput\r\n              type=\"text\"\r\n              placeholder=\"Type your message...\"\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              onKeyPress={handleKeyPress}\r\n            />\r\n            <SendButton onClick={handleSendMessage} disabled={!message.trim()}>\r\n              Send\r\n            </SendButton>\r\n          </ChatInput>\r\n        )}\r\n      </ChatContainer>\r\n    </ChatOverlay>\r\n  );\r\n};\r\n\r\nexport default ChatPopup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}